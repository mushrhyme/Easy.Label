{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Layer,Rect,Stage,Image,Group,Text,Label,Tag}from'react-konva';import Konva from'konva';import BBox from'./BBox';import{Input,Box}from'@chakra-ui/react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BBoxCanvas=props=>{const{rectangles,mode,selectedId,setSelectedId,setRectangles,setLabel,color_map,scale,label,image_size,image,strokeWidth,isLabelEditMode=false,setIsLabelEditMode=()=>{},handleLabelInputChange=()=>{},showLabels=false,suggestedLabels=[],showSuggestions=false,setShowSuggestions=()=>{},handleSuggestionSelect=()=>{},isLoadingLabels=false// 로딩 상태 prop 추출\n}=props;const[adding,setAdding]=useState(null);const[position,setPosition]=useState({x:0,y:0});const[isDragging,setIsDragging]=useState(false);const[dragStart,setDragStart]=useState(null);// 라벨 입력 위치 상태 추가\nconst[labelPosition,setLabelPosition]=useState({x:0,y:0});// 라벨 입력 상자의 참조\nconst inputRef=React.useRef(null);// 라벨 입력 필드 포커스 처리 개선\nuseEffect(()=>{if(isLabelEditMode&&inputRef.current){setTimeout(()=>{var _inputRef$current;(_inputRef$current=inputRef.current)===null||_inputRef$current===void 0?void 0:_inputRef$current.focus();// 라벨 모드가 활성화되면 추천 목록도 표시\nsetShowSuggestions(true);},100);}},[isLabelEditMode]);// 선택된 바운딩 박스가 변경되면 라벨 입력 위치 업데이트\nuseEffect(()=>{if(selectedId){const selectedRect=rectangles.find(rect=>rect.id===selectedId);if(selectedRect){setLabelPosition({x:(selectedRect.x+selectedRect.width/2)*scale+position.x,y:(selectedRect.y-30)*scale+position.y// 박스 상단에 위치\n});}}},[selectedId,rectangles,scale,position]);const checkDeselect=e=>{// 먼저 대상이 Rect인지 확인\nconst isClickOnRect=e.target instanceof Konva.Rect;// 커서 위치 가져오기\nconst stage=e.target.getStage();if(!stage)return;const pointer=stage.getPointerPosition();if(!pointer)return;// Edit 모드에서 Rect가 선택되지 않았을 때 캔버스 드래깅 시작\nif(mode==='Edit'&&!isClickOnRect){setIsDragging(true);setDragStart({x:pointer.x,y:pointer.y});}// Draw 모드에서 바운딩 박스 그리기 시작\nelse if(mode==='Draw'&&!isClickOnRect){if(selectedId===null){setAdding([(pointer.x-position.x)/scale,(pointer.y-position.y)/scale,(pointer.x-position.x)/scale,(pointer.y-position.y)/scale]);// 새 박스 그리기 시작할 때 라벨 초기화\nsetLabel(\"\");}else{setSelectedId(null);setIsLabelEditMode(false);}}// Rect를 클릭하지 않았고 다른 모드일 경우 선택 해제\nelse if(!isClickOnRect){setSelectedId(null);setIsLabelEditMode(false);}};useEffect(()=>{// Delete 키 입력 시 선택된 바운딩 박스 삭제\nconst handleKeydown=e=>{if(e.key==='Delete'&&selectedId!==null){setRectangles(prev=>prev.filter(rect=>rect.id!==selectedId));setSelectedId(null);setIsLabelEditMode(false);}};window.addEventListener('keydown',handleKeydown);return()=>window.removeEventListener('keydown',handleKeydown);},[selectedId,setRectangles,setSelectedId,setIsLabelEditMode]);// 라벨 입력 필드 핸들러\nconst handleLabelInputBlur=()=>{setIsLabelEditMode(false);};// 라벨 입력 필드 키 다운 핸들러\nconst handleLabelInputKeyDown=e=>{if(e.key==='Enter'){setIsLabelEditMode(false);}else if(e.key==='Escape'){setIsLabelEditMode(false);}};useEffect(()=>{console.log(\"BBoxCanvas: suggestedLabels 변경됨\",suggestedLabels);// showSuggestions가 true이고 라벨이 있는 경우에만 추천 UI 표시\nconsole.log(\"showSuggestions:\",showSuggestions);console.log(\"suggestedLabels:\",suggestedLabels);if(showSuggestions&&suggestedLabels.length>0){console.log(\"추천 UI 표시됨\");}},[suggestedLabels,showSuggestions]);// 스테이지 컨테이너 참조\nconst stageContainerRef=React.useRef(null);return/*#__PURE__*/_jsxs(\"div\",{ref:stageContainerRef,style:{position:'relative',width:`${image_size[0]*scale}px`,height:`${image_size[1]*scale}px`,overflow:'hidden',// 중요: 영역을 넘어가는 부분은 숨김\nborder:'2px solid #3182CE',// 파란색 테두리 추가\nborderRadius:'4px',// 테두리 모서리 둥글게\nboxShadow:'0 0 10px rgba(0,0,0,0.1)',// 약간의 그림자 효과\nbackground:'repeating-conic-gradient(#f0f0f0 0% 25%, #e0e0e0 0% 50%) 50% / 20px 20px'// 체커보드 패턴 배경\n},children:[/*#__PURE__*/_jsxs(Stage,{width:image_size[0]*scale,height:image_size[1]*scale// 마우스 클릭 시 이벤트\n,onMouseDown:checkDeselect// 마우스 이동 시 이벤트\n,onMouseMove:e=>{const stage=e.target.getStage();if(!stage)return;const pointer=stage.getPointerPosition();if(!pointer)return;// 박스 그리기 중인 경우\nif(adding!==null&&mode==='Draw'){setAdding([adding[0],adding[1],(pointer.x-position.x)/scale,(pointer.y-position.y)/scale]);}// 캔버스 드래깅 중인 경우\nelse if(isDragging&&mode==='Edit'){// 드래그 시작점과 현재 포인터 위치의 차이만큼 캔버스 이동\nsetPosition({x:position.x+(pointer.x-dragStart.x),y:position.y+(pointer.y-dragStart.y)});setDragStart({x:pointer.x,y:pointer.y});}}// 마우스 클릭 해제 시 이벤트\n,onMouseUp:()=>{// Draw 모드에서 바운딩 박스 그리기 완료\nif(adding!==null&&mode==='Draw'){// 최소 크기 이상인 경우에만 박스 생성 (작은 실수 클릭 방지)\nif(Math.abs(adding[2]-adding[0])>5&&Math.abs(adding[3]-adding[1])>5){const newId=`bbox-${rectangles.length}`;// 순차적 ID 생성\nsetLabel(\"\");// 라벨 상태 초기화\nsetRectangles(prev=>[...prev,{x:Math.min(adding[0],adding[2]),y:Math.min(adding[1],adding[3]),width:Math.abs(adding[2]-adding[0]),height:Math.abs(adding[3]-adding[1]),label:label,stroke:color_map[label]||\"#39FF14\",id:newId}]);setSelectedId(newId);// 박스 생성 후 자동으로 라벨 입력 모드 활성화\nsetIsLabelEditMode(true);}}// 항상 상태 초기화\nsetAdding(null);setIsDragging(false);setDragStart(null);},children:[/*#__PURE__*/_jsx(Layer,{x:position.x,y:position.y,children:/*#__PURE__*/_jsx(Rect,{x:0,y:0,width:image_size[0]*scale,height:image_size[1]*scale,fill:\"#FFFFFF\",stroke:\"#DDDDDD\",strokeWidth:1})}),/*#__PURE__*/_jsx(Layer,{x:position.x,y:position.y,children:/*#__PURE__*/_jsx(Image,{image:image||undefined,scaleX:scale,scaleY:scale})}),/*#__PURE__*/_jsxs(Layer,{x:position.x,y:position.y,children:[rectangles.map(rect=>/*#__PURE__*/_jsxs(Group,{children:[/*#__PURE__*/_jsx(BBox,{rectProps:rect,scale:scale,strokeWidth:strokeWidth,isSelected:rect.id===selectedId,onClick:()=>{setSelectedId(rect.id);setLabel(rect.label);},mode:mode,onChange:newAttrs=>{setRectangles(prev=>prev.map(r=>r.id===newAttrs.id?newAttrs:r));}}),showLabels&&/*#__PURE__*/_jsxs(Label,{x:rect.x*scale,y:rect.y*scale-20,opacity:0.8,children:[/*#__PURE__*/_jsx(Tag,{fill:\"#2F4F4F\",cornerRadius:3,pointerDirection:\"down\",pointerWidth:10,pointerHeight:10,lineJoin:\"round\"}),/*#__PURE__*/_jsx(Text,{text:rect.label||\"unlabeled\",padding:3,fontFamily:\"Arial\",fontSize:25,fill:\"white\"})]})]},rect.id)),adding&&/*#__PURE__*/_jsx(Rect,{fill:\"#39FF144D\",x:Math.min(adding[0],adding[2])*scale,y:Math.min(adding[1],adding[3])*scale,width:Math.abs(adding[2]-adding[0])*scale,height:Math.abs(adding[3]-adding[1])*scale,stroke:\"#39FF14\",strokeWidth:1})]})]}),isLabelEditMode&&selectedId&&stageContainerRef.current&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:`${labelPosition.y}px`,left:`${labelPosition.x}px`,transform:'translate(-50%, -100%)',zIndex:1000,background:'white',padding:'5px',borderRadius:'4px',boxShadow:'0 2px 5px rgba(0,0,0,0.2)'},children:[/*#__PURE__*/_jsx(Input,{ref:inputRef,size:\"sm\",value:label,placeholder:\"\\uB77C\\uBCA8 \\uC785\\uB825\",onChange:handleLabelInputChange,onBlur:()=>{// 포커스 잃을 때 바로 끄지 않고 약간의 딜레이 추가\n// 이렇게 하면 추천 항목 클릭이 가능해짐\nsetTimeout(()=>{var _document$activeEleme;if(!((_document$activeEleme=document.activeElement)!==null&&_document$activeEleme!==void 0&&_document$activeEleme.classList.contains('suggestion-item'))){setIsLabelEditMode(false);setShowSuggestions(false);}},200);},onKeyDown:handleLabelInputKeyDown,width:\"200px\"}),showSuggestions&&/*#__PURE__*/_jsx(Box,{mt:1,p:2,bg:\"white\",borderRadius:\"md\",boxShadow:\"sm\",border:\"1px solid\",borderColor:\"gray.200\",width:\"200px\",children:isLoadingLabels?/*#__PURE__*/// 로딩 상태 표시\n_jsx(\"div\",{style:{padding:'10px',textAlign:'center',color:'gray'},children:\"\\uD14D\\uC2A4\\uD2B8 \\uC778\\uC2DD \\uC911...\"}):suggestedLabels.length>0?/*#__PURE__*/// 추천 목록 표시\n_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'5px',maxHeight:'150px',overflowY:'auto'},children:suggestedLabels.map((sugLabel,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"suggestion-item\",style:{padding:'5px 8px',borderRadius:'3px',cursor:'pointer',backgroundColor:sugLabel===label?'#e2f1ff':'transparent',fontWeight:sugLabel===label?'bold':'normal'},onMouseDown:e=>{e.preventDefault();// 입력 창 blur 방지\nhandleSuggestionSelect(sugLabel);},children:sugLabel},idx))}):/*#__PURE__*/// 추천 결과가 없을 때\n_jsx(\"div\",{style:{padding:'10px',textAlign:'center',color:'gray'},children:\"\\uCD94\\uCC9C \\uD14D\\uC2A4\\uD2B8\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"})})]})]});};export default BBoxCanvas;","map":{"version":3,"names":["React","useState","useEffect","Layer","Rect","Stage","Image","Group","Text","Label","Tag","Konva","BBox","Input","Box","jsx","_jsx","jsxs","_jsxs","BBoxCanvas","props","rectangles","mode","selectedId","setSelectedId","setRectangles","setLabel","color_map","scale","label","image_size","image","strokeWidth","isLabelEditMode","setIsLabelEditMode","handleLabelInputChange","showLabels","suggestedLabels","showSuggestions","setShowSuggestions","handleSuggestionSelect","isLoadingLabels","adding","setAdding","position","setPosition","x","y","isDragging","setIsDragging","dragStart","setDragStart","labelPosition","setLabelPosition","inputRef","useRef","current","setTimeout","_inputRef$current","focus","selectedRect","find","rect","id","width","checkDeselect","e","isClickOnRect","target","stage","getStage","pointer","getPointerPosition","handleKeydown","key","prev","filter","window","addEventListener","removeEventListener","handleLabelInputBlur","handleLabelInputKeyDown","console","log","length","stageContainerRef","ref","style","height","overflow","border","borderRadius","boxShadow","background","children","onMouseDown","onMouseMove","onMouseUp","Math","abs","newId","min","stroke","fill","undefined","scaleX","scaleY","map","rectProps","isSelected","onClick","onChange","newAttrs","r","opacity","cornerRadius","pointerDirection","pointerWidth","pointerHeight","lineJoin","text","padding","fontFamily","fontSize","top","left","transform","zIndex","size","value","placeholder","onBlur","_document$activeEleme","document","activeElement","classList","contains","onKeyDown","mt","p","bg","borderColor","textAlign","color","display","flexDirection","gap","maxHeight","overflowY","sugLabel","idx","className","cursor","backgroundColor","fontWeight","preventDefault"],"sources":["/Users/nongshim/Desktop/Python/project/streamlit_image_annotation_backup/Detection/frontend/src/BBoxCanvas.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Layer, Rect, Stage, Image, Group, Text, Label, Tag } from 'react-konva';\nimport Konva from 'konva';\nimport BBox, { RectProps } from './BBox';\nimport { Input, Box } from '@chakra-ui/react';\n\ninterface Rectangle extends RectProps {\n  // RectProps already contains x, y, width, height, id, stroke, label\n}\n\ninterface BBoxCanvasLayerProps {\n  rectangles: Rectangle[];\n  setRectangles: React.Dispatch<React.SetStateAction<Rectangle[]>>;\n  mode: string;\n  selectedId: string | null;\n  setSelectedId: (id: string | null) => void;\n  setLabel: (label: string) => void;\n  color_map: { [key: string]: string };\n  scale: number;\n  label: string;\n  image_size: number[];\n  image: HTMLImageElement | undefined;\n  strokeWidth: number;\n  isLabelEditMode?: boolean; \n  setIsLabelEditMode?: React.Dispatch<React.SetStateAction<boolean>>;\n  handleLabelInputChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  showLabels?: boolean;\n  // 새로 추가된 props\n  suggestedLabels?: string[];\n  showSuggestions?: boolean;\n  setShowSuggestions?: React.Dispatch<React.SetStateAction<boolean>>;\n  handleSuggestionSelect?: (label: string) => void;\n  isLoadingLabels?: boolean; // 로딩 상태 추가\n}\n\nconst BBoxCanvas = (props: BBoxCanvasLayerProps) => {\n  const {\n    rectangles,\n    mode,\n    selectedId,\n    setSelectedId,\n    setRectangles,\n    setLabel,\n    color_map,\n    scale,\n    label,\n    image_size,\n    image,\n    strokeWidth,\n    isLabelEditMode = false,\n    setIsLabelEditMode = () => {},\n    handleLabelInputChange = () => {},\n    showLabels = false,\n    suggestedLabels = [],\n    showSuggestions = false,\n    setShowSuggestions = () => {},\n    handleSuggestionSelect = () => {},\n    isLoadingLabels = false, // 로딩 상태 prop 추출\n  } = props;\n\n  const [adding, setAdding] = useState<number[] | null>(null);\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState<{ x: number, y: number } | null>(null);\n  \n  // 라벨 입력 위치 상태 추가\n  const [labelPosition, setLabelPosition] = useState({ x: 0, y: 0 });\n  // 라벨 입력 상자의 참조\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  // 라벨 입력 필드 포커스 처리 개선\n  useEffect(() => {\n    if (isLabelEditMode && inputRef.current) {\n      setTimeout(() => {\n        inputRef.current?.focus();\n        // 라벨 모드가 활성화되면 추천 목록도 표시\n        setShowSuggestions(true);\n      }, 100);\n    }\n  }, [isLabelEditMode]);\n\n  // 선택된 바운딩 박스가 변경되면 라벨 입력 위치 업데이트\n  useEffect(() => {\n    if (selectedId) {\n      const selectedRect = rectangles.find(rect => rect.id === selectedId);\n      if (selectedRect) {\n        setLabelPosition({\n          x: (selectedRect.x + selectedRect.width / 2) * scale + position.x,\n          y: (selectedRect.y - 30) * scale + position.y // 박스 상단에 위치\n        });\n      }\n    }\n  }, [selectedId, rectangles, scale, position]);\n\n  const checkDeselect = (e: any) => {\n    // 먼저 대상이 Rect인지 확인\n    const isClickOnRect = e.target instanceof Konva.Rect;\n    \n    // 커서 위치 가져오기\n    const stage = e.target.getStage();\n    if (!stage) return;\n    \n    const pointer = stage.getPointerPosition();\n    if (!pointer) return;\n\n    // Edit 모드에서 Rect가 선택되지 않았을 때 캔버스 드래깅 시작\n    if (mode === 'Edit' && !isClickOnRect) {\n      setIsDragging(true);\n      setDragStart({ x: pointer.x, y: pointer.y });\n    }\n    // Draw 모드에서 바운딩 박스 그리기 시작\n    else if (mode === 'Draw' && !isClickOnRect) {\n      if (selectedId === null) {\n        setAdding([\n          (pointer.x - position.x) / scale, \n          (pointer.y - position.y) / scale, \n          (pointer.x - position.x) / scale, \n          (pointer.y - position.y) / scale\n        ]);\n        // 새 박스 그리기 시작할 때 라벨 초기화\n        setLabel(\"\");\n      } else {\n        setSelectedId(null);\n        setIsLabelEditMode(false);\n      }\n    }\n    // Rect를 클릭하지 않았고 다른 모드일 경우 선택 해제\n    else if (!isClickOnRect) {\n      setSelectedId(null);\n      setIsLabelEditMode(false);\n    }\n  };\n  \n  useEffect(() => {\n    // Delete 키 입력 시 선택된 바운딩 박스 삭제\n    const handleKeydown = (e: KeyboardEvent) => {\n      if (e.key === 'Delete' && selectedId !== null) {\n        setRectangles((prev) => prev.filter(rect => rect.id !== selectedId));\n        setSelectedId(null);\n        setIsLabelEditMode(false);\n      }\n    };\n    \n    window.addEventListener('keydown', handleKeydown);\n    return () => window.removeEventListener('keydown', handleKeydown);\n  }, [selectedId, setRectangles, setSelectedId, setIsLabelEditMode]);\n\n  // 라벨 입력 필드 핸들러\n  const handleLabelInputBlur = () => {\n    setIsLabelEditMode(false);\n  };\n\n  // 라벨 입력 필드 키 다운 핸들러\n  const handleLabelInputKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      setIsLabelEditMode(false);\n    } else if (e.key === 'Escape') {\n      setIsLabelEditMode(false);\n    }\n  };\n  useEffect(() => {\n    console.log(\"BBoxCanvas: suggestedLabels 변경됨\", suggestedLabels);\n    // showSuggestions가 true이고 라벨이 있는 경우에만 추천 UI 표시\n    console.log(\"showSuggestions:\", showSuggestions);\n    console.log(\"suggestedLabels:\", suggestedLabels);\n    if (showSuggestions && suggestedLabels.length > 0) {\n      console.log(\"추천 UI 표시됨\");\n    }\n  }, [suggestedLabels, showSuggestions]);\n  // 스테이지 컨테이너 참조\n  const stageContainerRef = React.useRef<HTMLDivElement>(null);\n\n  return (\n    <div \n      ref={stageContainerRef} \n      style={{ \n        position: 'relative',\n        width: `${image_size[0] * scale}px`,\n        height: `${image_size[1] * scale}px`,\n        overflow: 'hidden', // 중요: 영역을 넘어가는 부분은 숨김\n        border: '2px solid #3182CE', // 파란색 테두리 추가\n        borderRadius: '4px',         // 테두리 모서리 둥글게\n        boxShadow: '0 0 10px rgba(0,0,0,0.1)', // 약간의 그림자 효과\n        background: 'repeating-conic-gradient(#f0f0f0 0% 25%, #e0e0e0 0% 50%) 50% / 20px 20px' // 체커보드 패턴 배경\n      }}\n    >\n      <Stage\n        width={image_size[0] * scale}\n        height={image_size[1] * scale}\n        // 마우스 클릭 시 이벤트\n        onMouseDown={checkDeselect}\n        // 마우스 이동 시 이벤트\n        onMouseMove={(e) => {\n          const stage = e.target.getStage();\n          if (!stage) return;\n          \n          const pointer = stage.getPointerPosition();\n          if (!pointer) return;\n          \n          // 박스 그리기 중인 경우\n          if (adding !== null && mode === 'Draw') {\n            setAdding([\n              adding[0], \n              adding[1], \n              (pointer.x - position.x) / scale, \n              (pointer.y - position.y) / scale\n            ]);\n          } \n          // 캔버스 드래깅 중인 경우\n          else if (isDragging && mode === 'Edit') {\n            // 드래그 시작점과 현재 포인터 위치의 차이만큼 캔버스 이동\n            setPosition({\n              x: position.x + (pointer.x - dragStart!.x),\n              y: position.y + (pointer.y - dragStart!.y)\n            });\n            setDragStart({ x: pointer.x, y: pointer.y });\n          }\n        }}\n        // 마우스 클릭 해제 시 이벤트\n        onMouseUp={() => {\n          // Draw 모드에서 바운딩 박스 그리기 완료\n          if (adding !== null && mode === 'Draw') {\n            // 최소 크기 이상인 경우에만 박스 생성 (작은 실수 클릭 방지)\n            if (Math.abs(adding[2] - adding[0]) > 5 && Math.abs(adding[3] - adding[1]) > 5) {\n              const newId = `bbox-${rectangles.length}`; // 순차적 ID 생성\n              setLabel(\"\");  // 라벨 상태 초기화\n              setRectangles((prev) => [\n                ...prev,\n                {\n                  x: Math.min(adding[0], adding[2]),\n                  y: Math.min(adding[1], adding[3]),\n                  width: Math.abs(adding[2] - adding[0]),\n                  height: Math.abs(adding[3] - adding[1]),\n                  label: label,\n                  stroke: color_map[label] || \"#39FF14\",\n                  id: newId\n                }\n              ]);\n              setSelectedId(newId);\n              // 박스 생성 후 자동으로 라벨 입력 모드 활성화\n              setIsLabelEditMode(true);\n            }\n          }\n          \n          // 항상 상태 초기화\n          setAdding(null);\n          setIsDragging(false);\n          setDragStart(null);\n        }}\n      >\n        {/* Layer 추가: 이미지 영역 표시를 위한 배경 레이어 */}\n        <Layer x={position.x} y={position.y}>\n          <Rect \n            x={0}\n            y={0}\n            width={image_size[0] * scale}\n            height={image_size[1] * scale}\n            fill=\"#FFFFFF\"\n            stroke=\"#DDDDDD\"\n            strokeWidth={1}\n          />\n        </Layer>\n        {/* 기존 이미지 레이어 */}\n        <Layer x={position.x} y={position.y}>\n          <Image image={image || undefined} scaleX={scale} scaleY={scale} />\n        </Layer>\n        <Layer x={position.x} y={position.y}>\n          {rectangles.map((rect) => (\n            <Group key={rect.id}>\n              <BBox\n                rectProps={rect}\n                scale={scale}\n                strokeWidth={strokeWidth}\n                isSelected={rect.id === selectedId}\n                onClick={() => {\n                  setSelectedId(rect.id);\n                  setLabel(rect.label);\n                }}\n                mode={mode}\n                onChange={(newAttrs) => {\n                  setRectangles((prev) => prev.map((r) => (r.id === newAttrs.id ? newAttrs : r)));\n                }}\n              />\n              {showLabels && (\n                <Label\n                  x={rect.x * scale}\n                  y={rect.y * scale - 20}\n                  opacity={0.8}\n                >\n                  <Tag\n                    fill=\"#2F4F4F\"\n                    cornerRadius={3}\n                    pointerDirection=\"down\"\n                    pointerWidth={10}\n                    pointerHeight={10}\n                    lineJoin=\"round\"\n                  />\n                  <Text\n                    text={rect.label || \"unlabeled\"}\n                    padding={3}\n                    fontFamily=\"Arial\"\n                    fontSize={25}\n                    fill=\"white\"\n                  />\n                </Label>\n              )}\n            </Group>\n          ))}\n          {adding && (\n            <Rect\n              fill=\"#39FF144D\"\n              x={Math.min(adding[0], adding[2]) * scale}\n              y={Math.min(adding[1], adding[3]) * scale}\n              width={Math.abs(adding[2] - adding[0]) * scale}\n              height={Math.abs(adding[3] - adding[1]) * scale}\n              stroke=\"#39FF14\"\n              strokeWidth={1}\n            />\n          )}\n        </Layer>\n      </Stage>\n      {isLabelEditMode && selectedId && stageContainerRef.current && (\n        <div \n          style={{\n            position: 'absolute',\n            top: `${labelPosition.y}px`,\n            left: `${labelPosition.x}px`,\n            transform: 'translate(-50%, -100%)',\n            zIndex: 1000,\n            background: 'white',\n            padding: '5px',\n            borderRadius: '4px',\n            boxShadow: '0 2px 5px rgba(0,0,0,0.2)'\n          }}\n        >\n          <Input\n            ref={inputRef}\n            size=\"sm\"\n            value={label}\n            placeholder=\"라벨 입력\"\n            onChange={handleLabelInputChange}\n            onBlur={() => {\n              // 포커스 잃을 때 바로 끄지 않고 약간의 딜레이 추가\n              // 이렇게 하면 추천 항목 클릭이 가능해짐\n              setTimeout(() => {\n                if (!document.activeElement?.classList.contains('suggestion-item')) {\n                  setIsLabelEditMode(false);\n                  setShowSuggestions(false);\n                }\n              }, 200);\n            }}\n            onKeyDown={handleLabelInputKeyDown}\n            width=\"200px\"\n          />\n          \n          {/* 라벨 추천 UI */}\n          {showSuggestions && (\n            <Box\n              mt={1}\n              p={2}\n              bg=\"white\"\n              borderRadius=\"md\"\n              boxShadow=\"sm\"\n              border=\"1px solid\"\n              borderColor=\"gray.200\"\n              width=\"200px\"\n            >\n              {isLoadingLabels ? (\n                // 로딩 상태 표시\n                <div style={{ \n                  padding: '10px', \n                  textAlign: 'center', \n                  color: 'gray' \n                }}>\n                  텍스트 인식 중...\n                </div>\n              ) : suggestedLabels.length > 0 ? (\n                // 추천 목록 표시\n                <div style={{ \n                  display: 'flex', \n                  flexDirection: 'column', \n                  gap: '5px',\n                  maxHeight: '150px',\n                  overflowY: 'auto'\n                }}>\n                  {suggestedLabels.map((sugLabel, idx) => (\n                    <div\n                      key={idx}\n                      className=\"suggestion-item\"\n                      style={{\n                        padding: '5px 8px',\n                        borderRadius: '3px',\n                        cursor: 'pointer',\n                        backgroundColor: sugLabel === label ? '#e2f1ff' : 'transparent',\n                        fontWeight: sugLabel === label ? 'bold' : 'normal',\n                      }}\n                      onMouseDown={(e) => {\n                        e.preventDefault(); // 입력 창 blur 방지\n                        handleSuggestionSelect(sugLabel);\n                      }}\n                    >\n                      {sugLabel}\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                // 추천 결과가 없을 때\n                <div style={{ \n                  padding: '10px', \n                  textAlign: 'center', \n                  color: 'gray' \n                }}>\n                  추천 텍스트가 없습니다\n                </div>\n              )}\n            </Box>\n          )}\n        </div>\n      )}\n          </div>\n        );\n};\n\nexport default BBoxCanvas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}